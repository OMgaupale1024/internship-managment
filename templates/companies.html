{% extends 'layout.html' %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Companies</h3>
    <div>
      <button class="btn btn-outline-secondary me-2" id="exportCompanies">Export</button>
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addCompanyModal">Add Company</button>
    </div>
  </div>

  <div class="table-responsive">
  <table class="table table-hover">
    <thead class="table-light"><tr><th>ID</th><th>Name</th><th>Contact</th><th>Email</th><th>Phone</th><th>Actions</th></tr></thead>
    <tbody id="companiesTable">
      {% for c in companies %}
      <tr data-id="{{ c.id }}">
        <td class="col-id">{{ c.id }}</td>
        <td class="col-name">{{ c.name }}</td>
        <td class="col-contact">{{ c.contact_person }}</td>
        <td class="col-email">{{ c.email }}</td>
        <td class="col-phone">{{ c.phone }}</td>
        <td>
          <button class="btn btn-sm btn-icon btn-outline-secondary btn-edit" title="Edit"><i class="fa-solid fa-pen-to-square"></i></button>
          <button class="btn btn-sm btn-icon btn-outline-danger btn-delete" title="Delete"><i class="fa-solid fa-trash"></i></button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>

  <!-- Add Company Modal -->
  <div class="modal fade" id="addCompanyModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">Add Company</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
        <div class="modal-body">
          <form id="addCompanyForm">
            <input type="hidden" name="id" value="">
            <div class="mb-2"><label class="form-label">Name</label><input class="form-control" name="name" required></div>
            <div class="mb-2"><label class="form-label">Contact Person</label><input class="form-control" name="contact_person"></div>
            <div class="mb-2"><label class="form-label">Email</label><input class="form-control" name="email" type="email"></div>
            <div class="mb-2"><label class="form-label">Phone</label><input class="form-control" name="phone"></div>
            <div class="d-flex justify-content-end">
              <button class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
              <button class="btn btn-primary" id="saveCompanyBtn">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="editCompanyModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">Edit Company</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
        <div class="modal-body">
          <form id="editCompanyForm">
            <input type="hidden" name="id" value="">
            <div class="mb-2"><label class="form-label">Name</label><input class="form-control" name="name" required></div>
            <div class="mb-2"><label class="form-label">Contact Person</label><input class="form-control" name="contact_person"></div>
            <div class="mb-2"><label class="form-label">Email</label><input class="form-control" name="email" type="email"></div>
            <div class="mb-2"><label class="form-label">Phone</label><input class="form-control" name="phone"></div>
            <div class="d-flex justify-content-end">
              <button class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
              <button class="btn btn-primary" id="updateCompanyBtn">Update</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
