{% extends 'layout.html' %}
{% block content %}
  {% if not session.get('user') %}
  <!-- Hero Section -->
  <div class="px-4 py-5 my-5 text-center">
    <h1 class="display-5 fw-bold text-primary mb-4">Internship Management System</h1>
    <div class="col-lg-6 mx-auto">
      <p class="lead mb-4">Connecting talented students with great companies for meaningful internship opportunities.</p>
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <a href="/login" class="btn btn-primary btn-lg px-4 gap-3">Login</a>
        <a href="/register" class="btn btn-outline-primary btn-lg px-4">Register</a>
      </div>
    </div>
  </div>

  <!-- Features -->
  <div class="container px-4 py-5">
    <h2 class="pb-2 text-center">Why Choose Us?</h2>
    <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
      <div class="col d-flex align-items-start">
        <div class="icon-square text-bg-light d-inline-flex align-items-center justify-content-center fs-4 flex-shrink-0 me-3">
          <i class="fa-solid fa-graduation-cap"></i>
        </div>
        <div>
          <h3 class="fs-5">For Students</h3>
          <p>Find and apply to internships that match your skills and career goals. Track your applications and submit reports easily.</p>
        </div>
      </div>
      <div class="col d-flex align-items-start">
        <div class="icon-square text-bg-light d-inline-flex align-items-center justify-content-center fs-4 flex-shrink-0 me-3">
          <i class="fa-solid fa-building"></i>
        </div>
        <div>
          <h3 class="fs-5">For Companies</h3>
          <p>Post internship opportunities, manage applications, and rate intern performance all in one place.</p>
        </div>
      </div>
      <div class="col d-flex align-items-start">
        <div class="icon-square text-bg-light d-inline-flex align-items-center justify-content-center fs-4 flex-shrink-0 me-3">
          <i class="fa-solid fa-chart-line"></i>
        </div>
        <div>
          <h3 class="fs-5">Analytics & Insights</h3>
          <p>Get detailed analytics and reports on internship programs, student performance, and placement rates.</p>
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <!-- Dashboard Overview for Logged In Users -->
  <div class="row mb-4">
    <div class="col-md-12">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Welcome back, {{ session.get('user') }}!</h4>
          <p class="text-muted">Here's your overview for today</p>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Active Students</h5>
          <p class="card-text">Total: {{ students|length }}</p>
          <a href="/students" class="btn btn-outline-primary btn-sm">Manage Students</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Registered Companies</h5>
          <p class="card-text">Total: {{ companies|length }}</p>
          <a href="/companies" class="btn btn-outline-primary btn-sm">Manage Companies</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Open Internships</h5>
          <p class="card-text">Total: {{ internships|length }}</p>
          <a href="/internships" class="btn btn-outline-primary btn-sm">Manage Internships</a>
        </div>
      </div>
    </div>
  </div>

  <h4 class="mt-4">Recent Applications</h4>
  <div class="card">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead>
          <tr>
            <th>Student</th>
            <th>Internship</th>
            <th>Status</th>
            <th>Applied At</th>
          </tr>
        </thead>
        <tbody>
          {% for a in applications[:8] %}
          <tr>
            <td>{{ a.student_name }}</td>
            <td>{{ a.internship_title }}</td>
            <td>
              <span class="badge bg-{{ 'success' if a.status == 'Selected' else ('danger' if a.status == 'Rejected' else 'primary') }}">
                {{ a.status }}
              </span>
            </td>
            <td>{{ a.applied_at }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% endif %}
{% endblock %}
